create database Quiz
go

use Quiz
go

create table _user
(
	email nvarchar(255) primary key,
	name nvarchar(50) not null,
	password varchar(65) not null,
	role bit not null default 0,
	status bit not null default 1
)
go

insert into _user(email, name, password, role, status)
values ('LinhMD', 'Mai Đình Linh', '7568d29c54d0608467453d9bb7375f80ac48e33a6338341769bead34c538f0a6', 1, 1),
		('User', 'User', '7568d29c54d0608467453d9bb7375f80ac48e33a6338341769bead34c538f0a6', 0, 1)
									/* password : nah */
select * from _user

create table _subject 
(
	code varchar(10) primary key,
	name nvarchar(255) not null,
	time int not null,
	question_limit int not null
)
go

insert into _subject (code, name, question_limit, time)
values ('IOT101', 'Internet of Things', 10, 10),
		('SSG101', 'Working in Group Skills', 10, 10)


create table _question 
(
	id int primary key,
	question_content nvarchar(2048) not null,
	subjectID varchar(10) foreign key references _subject(code),
	create_date date not null,
	status bit not null default 1
)

insert into _question (id, question_content, create_date, subjectID)
values (1, '1', '2021-05-02', 'IOT101'),
		(2, '2', '2021-05-02', 'IOT101'),
		(3, '3', '2021-05-02', 'IOT101'),
		(4, '4', '2021-05-02', 'IOT101'),
		(5, '5',  '2021-05-02', 'IOT101'),
		(6, '6',  '2021-05-02', 'IOT101'),
		(7, '7', '2021-05-02', 'IOT101'),
		(8, '8',  '2021-05-02', 'IOT101'),
		(9, '9',  '2021-05-02', 'IOT101'),
		(10, '10',  '2021-05-02', 'IOT101'),
		(11, '11',  '2021-05-02', 'IOT101'),
		(12, '12',  '2021-05-02', 'IOT101'),
		(13, '13',  '2021-05-02', 'IOT101'),
		(14, '14',  '2021-05-02', 'IOT101'),
		(15, '15',  '2021-05-02', 'IOT101'),
		(16, '16',  '2021-05-02', 'IOT101'),
		(17, '17',  '2021-05-02', 'IOT101'),
		(18, '18',  '2021-05-02', 'IOT101'),
		(19, '19',  '2021-05-02', 'IOT101'),
		(20, '20',  '2021-05-02', 'IOT101'),
		(21, '21',  '2021-05-02', 'IOT101'),
		(22, '22',  '2021-05-02', 'IOT101'),
		(23, '23',  '2021-05-02', 'IOT101'),
		(24, '1',  '2021-05-02', 'SSG101'),
		(25, '2', '2021-05-02', 'SSG101'),
		(26, '3', '2021-05-02', 'SSG101'),
		(27, '4',  '2021-05-02', 'SSG101'),
		(28, '5',  '2021-05-02', 'SSG101'),
		(29, '6', '2021-05-02', 'SSG101'),
		(30, '7',  '2021-05-02', 'SSG101'),
		(31, '8',  '2021-05-02', 'SSG101'),
		(32, '9',  '2021-05-02', 'SSG101'),
		(33, '10', '2021-05-02', 'SSG101'),
		(34, '11', '2021-05-02', 'SSG101'),
		(35, '12',  '2021-05-02', 'SSG101'),
		(36, '13',  '2021-05-02', 'SSG101'),
		(37, '14',  '2021-05-02', 'SSG101'),
		(38, '15',  '2021-05-02', 'SSG101'),
		(39, '16', '2021-05-02', 'SSG101'),
		(40, '17',  '2021-05-02', 'SSG101'),
		(41, '18',  '2021-05-02', 'SSG101'),
		(42, '19',  '2021-05-02', 'SSG101'),
		(43, '20',  '2021-05-02', 'SSG101'),
		(44, '21',  '2021-05-02', 'SSG101'),
		(45, '22',  '2021-05-02', 'SSG101'),
		(46, '23',  '2021-05-02', 'SSG101')

create table _answer
(
	id int primary key,
	content nvarchar(255) not null,
	question_id int foreign key references _question(id),
	is_true bit not null
)

insert into _answer(id, content, question_id, is_true)
values (1, 'a', 1, 1), (2, 'b', 1, 0), (3, 'c', 1, 0), (4, 'd', 1, 0), 
(5, 'a', 2, 1), (6, 'b', 2, 0), (7, 'c', 2, 0), (8, 'd', 2, 0), 
(9, 'a', 3, 1), (10, 'b', 3, 0), (11, 'c', 3, 0), (12, 'd', 3, 0), 
(13, 'a', 4, 1), (14, 'b', 4, 0), (15, 'c', 4, 0), (16, 'd', 4, 0), 
(17, 'a', 5, 1), (18, 'b', 5, 0), (19, 'c', 5, 0), (20, 'd', 5, 0), 
(21, 'a', 6, 1), (22, 'b', 6, 0), (23, 'c', 6, 0), (24, 'd', 6, 0), 
(25, 'a', 7, 1), (26, 'b', 7, 0), (27, 'c', 7, 0), (28, 'd', 7, 0), 
(29, 'a', 8, 1), (30, 'b', 8, 0), (31, 'c', 8, 0), (32, 'd', 8, 0), 
(33, 'a', 9, 1), (34, 'b', 9, 0), (35, 'c', 9, 0), (36, 'd', 9, 0), 
(37, 'a', 10, 1), (38, 'b', 10, 0), (39, 'c', 10, 0), (40, 'd', 10, 0), 
(41, 'a', 11, 1), (42, 'b', 11, 0), (43, 'c', 11, 0), (44, 'd', 11, 0), 
(45, 'a', 12, 1), (46, 'b', 12, 0), (47, 'c', 12, 0), (48, 'd', 12, 0), 
(49, 'a', 13, 1), (50, 'b', 13, 0), (51, 'c', 13, 0), (52, 'd', 13, 0), 
(53, 'a', 14, 1), (54, 'b', 14, 0), (55, 'c', 14, 0), (56, 'd', 14, 0), 
(57, 'a', 15, 1), (58, 'b', 15, 0), (59, 'c', 15, 0), (60, 'd', 15, 0), 
(61, 'a', 16, 1), (62, 'b', 16, 0), (63, 'c', 16, 0), (64, 'd', 16, 0), 
(65, 'a', 17, 1), (66, 'b', 17, 0), (67, 'c', 17, 0), (68, 'd', 17, 0), 
(69, 'a', 18, 1), (70, 'b', 18, 0), (71, 'c', 18, 0), (72, 'd', 18, 0), 
(73, 'a', 19, 1), (74, 'b', 19, 0), (75, 'c', 19, 0), (76, 'd', 19, 0), 
(77, 'a', 20, 1), (78, 'b', 20, 0), (79, 'c', 20, 0), (80, 'd', 20, 0), 
(81, 'a', 21, 1), (82, 'b', 21, 0), (83, 'c', 21, 0), (84, 'd', 21, 0), 
(85, 'a', 22, 1), (86, 'b', 22, 0), (87, 'c', 22, 0), (88, 'd', 22, 0), 
(89, 'a', 23, 1), (90, 'b', 23, 0), (91, 'c', 23, 0), (92, 'd', 23, 0), 
(93, 'a', 24, 1), (94, 'b', 24, 0), (95, 'c', 24, 0), (96, 'd', 24, 0), 
(97, 'a', 25, 1), (98, 'b', 25, 0), (99, 'c', 25, 0), (100, 'd', 25, 0), 
(101, 'a', 26, 1), (102, 'b', 26, 0), (103, 'c', 26, 0), (104, 'd', 26, 0), 
(105, 'a', 27, 1), (106, 'b', 27, 0), (107, 'c', 27, 0), (108, 'd', 27, 0), 
(109, 'a', 28, 1), (110, 'b', 28, 0), (111, 'c', 28, 0), (112, 'd', 28, 0), 
(113, 'a', 29, 1), (114, 'b', 29, 0), (115, 'c', 29, 0), (116, 'd', 29, 0), 
(117, 'a', 30, 1), (118, 'b', 30, 0), (119, 'c', 30, 0), (120, 'd', 30, 0), 
(121, 'a', 31, 1), (122, 'b', 31, 0), (123, 'c', 31, 0), (124, 'd', 31, 0), 
(125, 'a', 32, 1), (126, 'b', 32, 0), (127, 'c', 32, 0), (128, 'd', 32, 0), 
(129, 'a', 33, 1), (130, 'b', 33, 0), (131, 'c', 33, 0), (132, 'd', 33, 0), 
(133, 'a', 34, 1), (134, 'b', 34, 0), (135, 'c', 34, 0), (136, 'd', 34, 0), 
(137, 'a', 35, 1), (138, 'b', 35, 0), (139, 'c', 35, 0), (140, 'd', 35, 0), 
(141, 'a', 36, 1), (142, 'b', 36, 0), (143, 'c', 36, 0), (144, 'd', 36, 0), 
(145, 'a', 37, 1), (146, 'b', 37, 0), (147, 'c', 37, 0), (148, 'd', 37, 0), 
(149, 'a', 38, 1), (150, 'b', 38, 0), (151, 'c', 38, 0), (152, 'd', 38, 0), 
(153, 'a', 39, 1), (154, 'b', 39, 0), (155, 'c', 39, 0), (156, 'd', 39, 0), 
(157, 'a', 40, 1), (158, 'b', 40, 0), (159, 'c', 40, 0), (160, 'd', 40, 0), 
(161, 'a', 41, 1), (162, 'b', 41, 0), (163, 'c', 41, 0), (164, 'd', 41, 0), 
(165, 'a', 42, 1), (166, 'b', 42, 0), (167, 'c', 42, 0), (168, 'd', 42, 0), 
(169, 'a', 43, 1), (170, 'b', 43, 0), (171, 'c', 43, 0), (172, 'd', 43, 0), 
(173, 'a', 44, 1), (174, 'b', 44, 0), (175, 'c', 44, 0), (176, 'd', 44, 0), 
(177, 'a', 45, 1), (178, 'b', 45, 0), (179, 'c', 45, 0), (180, 'd', 45, 0), 
(181, 'a', 46, 1), (182, 'b', 46, 0), (183, 'c', 46, 0), (184, 'd', 46, 0)

select id, content, question_id, is_true from _answer
where question_id = '1'

update _answer
set content = '', is_true = ''
where id = ''


create table _quiz_history
(
	id int primary key,
	quiz_taker nvarchar(255) foreign key references _user(email),
	subject varchar(10)  foreign key references _subject(code),
	time date not null,
	point float not null default 0
)

create table _quiz_detail
(
	quiz_id int not null foreign key references _quiz_history(id),
	question_id int not null foreign key references _question(id),
	answer char,
	primary key (quiz_id, question_id)
)
